---
title: "Base Image"
description: "How to define a base image for your template"
icon: "1"
---

## Creating template

When creating a template, you can specify options:

<CodeGroup dropdown>

```typescript
const template = Template({
  fileContextPath: ".", // Custom file context path
  fileIgnorePatterns: [".git", "node_modules"], // File patterns to ignore
});
```

```python
template = Template(
    file_context_path=".",  # Custom file context path
    file_ignore_patterns=[".git", "node_modules"],  # File patterns to ignore
)
```

</CodeGroup>

**File ignoring**: The SDK automatically reads `.dockerignore` files and combines them with your `fileIgnorePatterns` (TypeScript) or `file_ignore_patterns` (Python). Files matching these patterns are excluded from uploads and hash calculations.

## Defining base image
Choose from predefined base images or use custom ones:

<CodeGroup dropdown>

```typescript
// Predefined base images
template.fromUbuntuImage("lts"); // ubuntu:lts
template.fromUbuntuImage("22.04"); // ubuntu:22.04
template.fromDebianImage("slim"); // debian:slim
template.fromDebianImage("bullseye"); // debian:bullseye
template.fromPythonImage("3.13"); // python:3.13
template.fromPythonImage("3.11"); // python:3.11
template.fromNodeImage("lts"); // node:lts
template.fromNodeImage("20"); // node:20

// Custom base image
template.fromImage("custom-image:latest");

// Use default E2B base image
template.fromBaseImage(); // e2bdev/base

// Parse existing Dockerfile
const dockerfileContent = `
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
ENV NODE_ENV=production`;

template.fromDockerfile(dockerfileContent);
```

```python
# Predefined base images
template.from_ubuntu_image("lts")  # ubuntu:lts
template.from_ubuntu_image("22.04")  # ubuntu:22.04
template.from_debian_image("slim")  # debian:slim
template.from_debian_image("bullseye")  # debian:bullseye
template.from_python_image("3.13")  # python:3.13
template.from_python_image("3.11")  # python:3.11
template.from_node_image("lts")  # node:lts
template.from_node_image("20")  # node:20

# Custom base image
template.from_image("custom-image:latest")

# Use default E2B base image
template.from_base_image()  # e2bdev/base

# Build from existing template
template.from_template("existing-template-alias")

# Parse and build from Dockerfile
template.from_dockerfile("Dockerfile")
template.from_dockerfile("FROM ubuntu:22.04\nRUN apt-get update")
```

</CodeGroup>

<Note>
You can only call base image methods once per template. Subsequent calls will throw an error.
</Note>

## Parsing existing Dockerfiles

Convert existing Dockerfiles to template format using `fromDockerfile()`:

<CodeGroup dropdown>

```typescript
const dockerfileContent = `
FROM ubuntu:22.04
RUN apt-get update && apt-get install -y curl
WORKDIR /app
COPY . .
ENV NODE_ENV=production
ENV PORT=3000
USER appuser`;

const template = Template()
  .fromDockerfile(dockerfileContent)
  .setStartCmd("npm start", waitForTimeout(5_000));
```

```python
dockerfile_content = """
FROM ubuntu:22.04
RUN apt-get update && apt-get install -y curl
WORKDIR /app
COPY . .
ENV NODE_ENV=production
ENV PORT=3000
USER appuser
"""

template = (
    Template()
    .from_dockerfile(dockerfile_content)
    .set_start_cmd("npm start", wait_for_timeout(5_000))
)
```

</CodeGroup>

### Dockerfile instructions support

| Instruction          | Supported  | Behavior                                                                                          |
| :---                 |    :----:  | :---                                                                                              |
| `FROM`               | <Icon icon="square-check" iconType="solid" />         | Sets base image                                                                                   |
| `RUN`                | <Icon icon="square-check" iconType="solid" />         | Converts to `runCmd()` / `run_cmd()`                                                              |
| `COPY` / `ADD`       | <Icon icon="square-check" iconType="solid" />         | Converts to `copy()`                                                                              |
| `WORKDIR`            | <Icon icon="square-check" iconType="solid" />         | Converts to `setWorkdir()` / `set_workdir()`                                                      |
| `USER`               | <Icon icon="square-check" iconType="solid" />         | Converts to `setUser()` / `set_user()`                                                            |
| `ENV`                | <Icon icon="square-check" iconType="solid" />         | Converts to `setEnvs()` / `set_envs()`; supports both `ENV key=value` and `ENV key value` formats |
| `CMD` / `ENTRYPOINT` | <Icon icon="square-check" iconType="solid" />         | Converts to `setStartCmd()` / `set_start_cmd()` with 20 seconds timeout as ready command          |
| `EXPOSE`             | <Icon icon="xmark" iconType="solid" />                | Skipped (not supported)                                                                           |
| `VOLUME`             | <Icon icon="xmark" iconType="solid" />                | Skipped (not supported)                                                                           |

<Warning>
Multi-stage Dockerfiles are not supported.
</Warning>

## Login to private registries
If your base image is hosted in a private registry, you can provide credentials using the following helpers:
- General registry
- GCP Artifact Registry
- AWS ECR

### General Registry

<CodeGroup dropdown>

```typescript
Template().fromImage('ubuntu:22.04', {
  username: 'user',
  password: 'pass',
})
```

```python
Template().from_image(
    image="ubuntu:22.04",
    username="user",
    password="pass",
)
```

</CodeGroup>


### GCP Artifact Registry

<CodeGroup dropdown>

```typescript
// From file path
Template().fromGCPRegistry('ubuntu:22.04', {
  serviceAccountJSON: './service_account.json',
})

// From object
Template().fromGCPRegistry('ubuntu:22.04', {
  serviceAccountJSON: { project_id: '123', private_key_id: '456' },
})
```

```python
# From file path
Template().from_gcp_registry(
    image="ubuntu:22.04",
    service_account_json="./service_account.json",
)

# From object
Template().from_gcp_registry(
    image="ubuntu:22.04",
    service_account_json={"project_id": "123", "private_key_id": "456"},
)
```

</CodeGroup>


### AWS ECR

<CodeGroup dropdown>

```typescript
Template().fromAWSRegistry('ubuntu:22.04', {
  accessKeyId: '123',
  secretAccessKey: '456',
  region: 'us-west-1',
})
```

```python
Template().from_aws_registry(
    image="ubuntu:22.04",
    access_key_id="123",
    secret_access_key="456",
    region="us-west-1",
)
```

</CodeGroup>
